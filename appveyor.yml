version: '{build}'
image:
- macOS
- Ubuntu
- Visual Studio 2019
install:
- pwsh: >-
    if($IsMacOS){

    brew install dub ldc

    } if ($IsLinux){

    sudo snap install --classic --channel=edge ldc2

    sudo snap install --classic --channel=edge dub

    } if ($IsWindows){

    choco install ldc

    mv /tools/ldc* /tools/ldc

    }
build_script:
- pwsh: appveyor.ps1
test_script:
- pwsh: >-
    if($IsWindows){$env:PATH += ";/tools/ldc/bin"}

    dub test --parallel